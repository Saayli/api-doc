{% extends "base.twig" %}

{% block title %} Users {% endblock %}
{% block content %}

<h1>Users</h1>

<div class="alert alert-success">On DoYouBuzz Showcase, the user id matches the DoYouBuzz user id</div>

<p>If you need to direct a manager to a Showcase user's profile page, you should use this URL : http://showcase.doyoubuzz.com/a/user/{dybid}/profile</p>

<h2>Get all users for your company</h2>
<p><span class="label label-info">GET</span> <code> /users</code> 

<h3>URL parameters</h3>

<table class="table table-bordered table-striped">
	<tr>
		<th>Name</th>
		<th>Description</th>
		<th>Type</th>
	</tr>		
	<tr>
		<td>filter</td>
		<td>Specify the kind of users you want to retrieve (user, candidate, admin of manager)</td>
		<td>u | c | a |m</td>
	</tr>
	<tr>
		<td>page</td>
		<td>Page number (results are paginated)</td>
		<td>Integer</td>
	</tr>
</table>

<p><a class="btn js-expand" href="javascript:void()" data-show-element="users-example">Example</a>


<div class="js-expandable users-example">
<p><span class="label label-info">GET</span> <code> /users</code></p>
<pre name="code" class="javascript">
{
   "users": [
      {
         "id": 1,
         "username": "will.adama@bg.com",
         "email": "will.adama@bg.com",
         "firstname": "Will",
         "lastname": "Adama",
	 "phone": "02 40 69 73 15",
         "id_origin": "1"
      },
      {
         "id": 2,
         "username": "laura.roslin@bg.com",
         "email": "laura.roslin@bg.com",
         "firstname": "Laura",
         "lastname": "Roslin",
         "id_origin": "2"
      },
      {
         "id": 3,
         "username": "brendan.constanza@bg.com",
         "email": "brendan.constanza@bg.com",
         "firstname": "Brendan",
         "lastname": "Constanza",
         "kind": "user",
         "id_origin": "187"
      },
      {
         "id": 4,
         "username": "alex.quartararo@bg.com",
         "email": "alex.quartararo@bg.com",
         "firstname": "Alex",
         "lastname": "Quartararo",
         "kind": "candidate",
         "id_origin": "342"
      },
      {
         "id": 5,
         "username": "margaret.edmonson@bg.com",
         "email": "margaret.edmonson@bg.com",
         "firstname": "Margaret",
         "lastname": "Edmonson",
         "kind": "user",
         "id_origin": "812"
      },
      {
         "id": 6,
         "username": "kara.thrace@bg.com",
         "email": "kara.thrace@bg.com",
         "firstname": "Kara",
         "lastname": "Thrace",
         "kind": "user",
         "id_origin": "1664"
      },
      {
         "id": 7,
         "username": "galen.tyrol@bg.com",
         "email": "galen.tyrol@bg.com",
         "firstname": "Galen",
         "lastname": "Tyrol",
         "kind": "user",
         "id_origin": "156"
      },
      {
         "id": 8,
         "username": "samuel.anders@bg.com",
         "email": "samuel.anders@bg.com",
         "firstname": "Samuel",
         "lastname": "Anders",
         "kind": "143"
      },
      {
         "id": 9,
         "username": "billy.keikeya@bg.com",
         "email": "billy.keikeya@bg.com",
         "firstname": "Billy",
         "lastname": "Keikeya",
         "kind": "user",
         "id_origin": "111"
      },
      {
         "id": 10,
         "username": "gaius.baltar@bg.com",
         "email": "gaius.baltar@bg.com",
         "firstname": "Gaïus ",
         "lastname": "Baltar",
         "kind": "user",
         "id_origin": "786"
      },
      {
         "id": 11,
         "username": "tom.zarek@bg.com",
         "email": "tom.zarek@bg.com",
         "firstname": "Tom ",
         "lastname": "Zarek",
         "kind": "candidate",
         "id_origin": "435"
      },
      {
         "id": 18,
         "username": "lee.adama@bg.com",
         "email": "lee.adama@bg.com",
         "firstname": "Lee",
         "lastname": "Adama",
         "kind": "candidate",
         "id_origin": "1664"
      }
   ],
   "total": 12
}
</pre>
</div>

<h2>Search for a user</h2>
<p><span class="label label-info">GET</span> <code> /users/search</code></p>

<p>The user search will search all the user's first name, last name and email address matching the given search term.</p>

<h3>URL parameters</h3>

<table class="table table-bordered table-striped">
	<tr>
		<th>Name</th>
		<th>Description</th>
		<th>Type</th>
	</tr>		
	<tr>
		<td>term</td>
		<td>Search term</td>
		<td></td>
	</tr>
</table>

<p><a class="btn js-expand" href="javascript:void()" data-show-element="users-search-example">Example</a>


<div class="js-expandable users-search-example">
<p><span class="label label-info">GET</span> <code> /users/search?term=will</code>	
<pre name="code" class="javascript">
{
	[
		{
			"username":"will.adama@bg.com",
			"email":"will.adama@bg.com",
			"id_origin":"124",
			"firstname":"Will",
			"lastname":"Adama",
			"phone": "02 40 69 73 15",
			"id":2
		},
		{
			"username":"other@bg.com",
			"email":"other@bg.com",
			"id_origin":"147",
			"firstname":"William",
			"lastname":"Roslin",
			"id":18
		},
	]
}
</pre>
</div>


<h2>Get a single user information</h2>
<p><span class="label label-info">GET</span> <code> /users/:id</code>

<h3>URL parameters</h3>

<table class="table table-bordered table-striped">
	<tr>
		<th>Name</th>
		<th>Description</th>
		<th>Type</th>
	</tr>		
	<tr>
		<td>isIdOrigin (optional). Default to 0.</td>
		<td>Set this parameter to "1" if the id your are sending is the ID on your system. It works only if you have setup a SSO in your Showcase account</td>
		<td>boolean</td>
	</tr>
</table>

<p><a class="btn js-expand" href="javascript:void()" data-show-element="user-example">Example</a>
<div class="js-expandable user-example">

<p><span class="label label-info">GET</span> <code> /users/6</code>	
<pre name="code" class="javascript">
{
    "id": 6,
    "username": "kara.thrace@bg.com",
    "email": "kara.thrace@bg.com",
    "firstname": "Kara",
    "lastname": "Thrace",
    "phone": "555 666 7777",
    "kind": "user",
    "id_origin": "1664"
}
</pre>
</div>


<h2>Get a user's CV </h2>
<p><span class="label label-info">GET</span> <code> /users/:id/cv</code>

<p><a class="btn js-expand" href="javascript:void()" data-show-element="user-cv">Example</a>

<div class="js-expandable user-cv">

<p><span class="label label-info">GET</span> <code> /users/6/cv</code>

<pre name="code" class="javascript">
[
	{ 
		"title": "Pilote de Viper", 
		"completion": 0.42, 
		"anonymized": false, 
		"main": true, 
		"id": 2679, 
		"public_url": "http://cv.battlestar-gallactica.cf/Piq5h6dBT7KPccWvsP5UBQ/-Xv63R1jNVGCE_osaJ9rATpbKFx4", 
		"private_url": "http://cv.battlestar-gallactica.cf/Piq5h6dBT7KPccWvsP5UBQ/-Xv63R1jNVGCE_osaJ9rATpbKFx4", 
		"created": "2013-03-07T11:08:42+0100", 
		"indexed": true, 
		"protected": false, 
		"updated": "2013-03-07T12:30:21+0100", 
		"language": "fr_FR" 
	},
	{ 
		"title": "Pilote de Viper", 
		"completion": 0.42, 
		"anonymized": true, 
		"main": false, 
		"id": 2680, 
		"public_url": "http://cv.battlestar-gallactica.cf/Piq5h6dBT7KPccWvsP5UBQ/-Xv63R1jNVGCE_osaJ9rATpbKFx4", 
		"private_url": "http://cv.battlestar-gallactica.cf/Piq5h6dBT7KPccWvsP5UBQ/-Xv63R1jNVGCE_osaJ9rATpbKFx4", 
		"created": "2013-03-07T11:24:17+0100", 
		"updated": "2013-03-07T14:48:35+0100", 
		"language": "fr_FR" 
	}
]
</pre>
</div>

<h2>Get a user's tags</h2>
<p><span class="label label-info">GET</span> <code> /users/:id/tags</code>

<p><a class="btn js-expand" href="javascript:void()" data-show-element="user-tags">Example</a>
<div class="js-expandable user-tags">

<p><span class="label label-info">GET</span> <code> /users/6/tags/</code>	
<pre name="code" class="javascript">
[
	{
		id: 31,
		id_origin: 0,
		title: "Commercial",
		type: 0,
		translations: [
			{
				id: 102,
				locale: "en",
				field: "title",
				content: "Business Development"
			}
		]
	},
	{
		id: 214,
		id_origin: 0,
		title: "Développement",
		type: 0,
		translations: [
			{
				id: 103,
				locale: "en",
				field: "title",
				content: "Development"
			}
		]
	}
]
</pre>
</div>


<h2>Get comments</h2>
<p>
	<span class="label label-info">POST</span>
	<code> /users/comments</code>
	<p>The attributes are given in PHP then encoded in JSON in the POST body.</p>
</p>

<h3>Optional body parameters</h3>

<table class="table table-bordered table-striped">
	<tr>
		<th>Name</th>
		<th>Description</th>
		<th>Type</th>
	</tr>
	<tr>
		<td>user</td>
		<td>Id of the user</td>
		<td>integer</td>
	</tr>
	<tr>
		<td>created</td>
		<td>The date of the creation of the comment(s). Format: YYYY-MM-DD</td>
		<td>string</td>
	</tr>
	<tr>
		<td>updated</td>
		<td>The date of the update of the comment(s). Format: YYYY-MM-DD</td>
		<td>string</td>
	</tr>
</table>

<a class="btn js-expand" href="javascript:void()" data-show-element="user-comments">Example</a>
<div class="js-expandable user-comments">
	<h2>Request example</h2>
	<span class="label label-info">POST</span> <code> /users/comments</code>
	<pre name="code" class="javascript">
	{
		"filters": [
			{ "type":"user", "value":"76" },
			{ "type":"created", "value":"2018-02-01", "comparator":"<" }
		],
		"sort": [
			{ "field":"created", "order":"ASC"}
		]
	}
	</pre>
	<h2>Response example</h2>
	<span class="label label-info">GET</span> <code> /users/comments</code>
	<pre name="code" class="javascript">
	{
    	"comments": [
            {
                "id": 1,
                "text": "Un très bon pilote.",
                "created": "2016-12-08T15:51:48+0100",
                "updated": "2016-12-08T16:12:23+0100",
                "author": {
                    "username": "will.adama@bg.com",
                    "email": "will.adama@bg.com",
                    "firstname": "Will",
                    "lastname": "Adama",
                    "id": 42
                }
            }
        ]
    }
	</pre>
</div>

<h2>Logout a user</h2>
<p><span class="label label-info">DELETE</span> <code> /users/:id/logout</code>

<p>If a user is connected on DoYouBuzz Showcase, this method will logout the user.</p>

<h3>URL parameters</h3>

<table class="table table-bordered table-striped">
	<tr>
		<th>Name</th>
		<th>Description</th>
		<th>Type</th>
	</tr>		
	<tr>
		<td>isIdOrigin (optional). Default to 0.</td>
		<td>Set this parameter to "1" if the id your are sending is the ID on your system. It works only if you have setup a SSO in your Showcase account</td>
		<td>boolean</td>
	</tr>
</table>

<p><a class="btn js-expand" href="javascript:void()" data-show-element="user-logout">Example</a>

<div class="js-expandable user-logout">

<p><span class="label label-info">DELETE</span> <code> /users/6/logout</code>

<pre name="code" class="javascript">
	{ success: true }
</pre>
</div>


<h2>Associate tags on a user</h2>
<p><span class="label label-info">PUT</span> <code> /users/:id/associateTags</code>

<h3>Body parameters</h3>

<table class="table table-bordered table-striped">
	<tr>
		<th>Name</th>
		<th>Description</th>
		<th>Type</th>
	</tr>		
	<tr>
		<td>tags</td>
		<td>Id of the tag to associate on the current user or array of ids</td>
		<td>integer | Array</td>
	</tr>
	<tr>
		<td>reset (optional)</td>
		<td>You can use this option to indicates you want to reset all the current tags associated to the user before applying the one sent in the request</td>
		<td>Boolean</td>
	</tr>
</table>

<p><a class="btn js-expand" href="javascript:void()" data-show-element="user-associateTags">Example</a>

<div class="js-expandable user-associateTags">

<h3>Request</h3>
<p><span class="label label-info">PUT</span> <code> /users/1/associateTags</code>

<pre>
tags[]=16&tags[]=266&tags=271&reset=1
</pre>

<h3>Response</h3>
<p>You get a 204 response code (request successful) if the association succeeded</p>

</div>

<h2>Disassociate tags on a user</h2>
<p><span class="label label-info">PUT</span> <code> /users/:id/tags</code>

<table class="table table-bordered table-striped">
	<tr>
		<th>Name</th>
		<th>Description</th>
		<th>Type</th>
	</tr>		
	<tr>
		<td>tags</td>
		<td>Id of the tag to disassociate on the current user</td>
		<td>integer | Array</td>
	</tr>
</table>

<p><a class="btn js-expand" href="javascript:void()" data-show-element="user-associateTags">Example</a>

<div class="js-expandable user-associateTags">

<h3>Request</h3>
<p><span class="label label-info">PUT</span> <code> /users/6/disassociateTags</code>

<pre>
tags[]=16&tags[]=266&tags=271
</pre>

<h3>Response</h3>
<p>You get a 204 response code (request successful) if the disassociation succeeded</p>

</div>

<h2>Changer User Kind</h2>
<p><span class="label label-info">PUT</span> <code> /users/:id/kind</code>

<table class="table table-bordered table-striped">
        <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Type</th>
        </tr>
        <tr>
                <td>kind</td>
                <td>New kind for the user</td>
                <td>string "user", "candidate", "other"</td>
        </tr>
</table>

<p><a class="btn js-expand" href="javascript:void()" data-show-element="user-kind">Example</a>

<div class="js-expandable user-kind">

<h3>Request</h3>
<p><span class="label label-info">PUT</span> <code> /users/777/kind</code>

<pre>
kind=candidate
</pre>

<h3>Response</h3>
<p>You get a 204 response code (request successful) if user's kind have been changed</p>

</div>

{% endblock %}

